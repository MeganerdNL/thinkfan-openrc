#!/usr/bin/openrc-run
# Copyright 2023 MeganerdNL
# Distributed under the terms of the MIT License

description="thinkfan - A minimalist fan control program. Supports the sysfs hwmon interface and thinkpad_acpi"
supervisor="supervise-daemon"
command="/usr/bin/thinkfan"
command_args="-q"
command_args_foreground="-n"
pidfile="/run/supervice-${RC_SVCNAME}.pid"
extra_started_commands="reload"
required_files="/etc/thinkfan.conf"

depend() {
    after modules
}

reload() {
        ebegin "Reloading ${SVCNAME}"
        ${supervisor} ${RC_SVCNAME} --signal HUP --pidfile "${pidfile}"
        eend $?
}
